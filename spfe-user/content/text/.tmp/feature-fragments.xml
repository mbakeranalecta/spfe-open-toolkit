<?xml version="1.0" encoding="UTF-8"?>
<!-- This file is part of the SPFE Open Toolkit. See the accompanying license.txt file for applicable licenses.-->
<!-- (c) Copyright Analecta Communications Inc. 2012 All Rights Reserved. -->

<feature-topic xmlns="http://spfeopentoolkit.org/ns/spfe-docs"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://spfeopentoolkit.org/ns/spfe-docs http://spfeopentoolkit.org/spfe-docs/topic-types/feature-topic/schemas/feature-topic.xsd">
    <head>
        <id>feature-fragments</id>
        <history>
            <revision>
                <date>2014-06-23</date>
                <author>mbaker</author>
                <comment>New Topic</comment>
                <status>In progress</status>
            </revision>
        </history>
        <index>
            <entry>
                <type>feature</type>
                <term>fragment</term>
            </entry>
            <entry>
                <type>feature</type>
                <term>fragments</term>
            </entry>
       </index>
    </head>
    <body>
        <title>Fragments</title>
        <p><feature>Fragments</feature> are a <task>content reuse</task> feature of the <feature>EPPO-simple</feature> <feature>plugin</feature>.</p>
        <p>A fragment is an arbitrary sequence of text structures (paragraphs, lists, etc.) that has been given an id so that it can be included by reference at other points in the content. </p>
        <codeblock>&lt;fragment id="test-fragment">
    &lt;local-strings>
        &lt;string id="test-string-1">&lt;bold>test string one&lt;/bold>&lt;/string>
        &lt;string id="test-string-2">&lt;italic>test string two&lt;/italic>&lt;/string>
    &lt;/local-strings>
    &lt;p>This is a piece of text in a fragment. It includes references to local strings &lt;string-ref id-ref="test-string-1"/> and &lt;string-ref id-ref="test-string-2"/>. And to a global string &lt;string-ref id-ref="product"/>&lt;/p>
&lt;/fragment>
&lt;p>The following is a reference to the fragment defined above:&lt;/p>
&lt;fragment-ref id-ref="test-fragment">
    &lt;local-strings>
        &lt;string id="test-string-1">&lt;code>this is test string number one&lt;/code>&lt;/string>
    &lt;/local-strings>
&lt;/fragment-ref></codeblock>
        
        <p>Fragments can be defined inline in a topic file, or they can be defined in separate fragment collections. If a fragment is defined inline, it is included where it occurs. Fragments in fragment files are not included anywhere unless they are pulled in by a fragment reference.</p>
        <p>A fragment reference inserts a fragment by ID at the place it occurs in the text.</p>
        <p>Fragments are recursive. That is, fragments can contain other fragments and fragment references.</p>
        <p>Because you often want to change some part of a text when it is being reused, fragments and fragment references can both define local <feature>strings</feature>. Any <feature>string references</feature> inside a fragment will be resolved by looking first at local-strings defined in the fragment reference, then at local strings defined in the fragment definition, and then at global strings. In effect, this means that you can define string substitutions whenever you insert a fragment into your content.</p>
    </body>
</feature-topic>
